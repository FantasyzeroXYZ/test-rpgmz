# 文件名: .github/workflows/deploy.yml

name: Deploy Static Content to Pages # 动作的名称

on:
  # 每次推送到 main 分支时触发此工作流程
  push:
    branches: ["main"]

  # 允许在 GitHub Actions 界面手动运行此工作流程
  workflow_dispatch:

# 设置 GITHUB_TOKEN 的权限，用于部署到 Pages
permissions:
  contents: read
  pages: write
  id-token: write

# 仅允许一次并发部署
concurrency:
  group: "pages"
  cancel-in-progress: true

jobs:
  # 构建步骤 (由于项目是纯静态文件，我们只需要准备文件)
  build:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout # 检出代码
        uses: actions/checkout@v4
      
      # ⚠️ 注意: 您的项目没有复杂的编译步骤，因此我们直接使用源文件作为构建产物
      - name: Setup Pages # 配置 Pages 环境
        uses: actions/configure-pages@v5

      - name: Upload Artifact # 上传构建产物 (整个仓库内容)
        uses: actions/upload-pages-artifact@v3
        with:
          # 上传当前目录下的所有文件。这是您的静态资源所在的地方。
          path: './' 

    outputs:
      # 输出 Pages 配置以供下一步使用
      url: ${{ steps.deploy-pages.outputs.page_url }}

  # 部署步骤
  deploy:
    environment:
      name: github-pages # 指定部署环境为 GitHub Pages
      url: ${{ needs.build.outputs.url }}
    runs-on: ubuntu-latest
    needs: build # 依赖于 build 步骤
    steps:
      - name: Deploy to GitHub Pages # 使用官方 Action 进行部署
        uses: actions/deploy-pages@v4